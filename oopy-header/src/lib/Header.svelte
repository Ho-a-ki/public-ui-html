<script>
  import { slide, fly } from "svelte/transition";
  let mobileMenuView = false;
  let headerView = true;
  let y = 0;
  let lastY = 0;
  let screenSize;

  $: {
    scrollCheck(y);
  }

  const scrollCheck = (y) => {
    let dy = lastY - y;
    if (dy > -0.5) {
      headerView = true;
    } else {
      headerView = false;
    }
    lastY = y;
  };

  let mobileMenuList = [
    { name: "브랜드", URL: "/brand" },
    { name: "제품 철학", URL: "/philosophy" },
    { name: "스토어", URL: "/store" },
    { name: "직업", URL: "/jobs" },
    { name: "제품 찾기", URL: "https://justkorea.co.kr" },
    { name: "허브 백과사전", URL: "/herb" },
  ];

  function toggleMobileMenu() {
    mobileMenuView = !mobileMenuView;
  }
</script>

<svelte:window bind:innerWidth={screenSize} bind:scrollY={y}/>

<main>
  <header>
    {#if headerView}
      <section
        class="fixed w-full bg-white flex flex-row justify-between md:hidden"
        transition:fly={{ y: -100, duration: 300 }}
      >
        <div class="w-20 p-2 m-2">
          <a href="/#">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 125.98 91.12"><defs><style>.cls-1{fill:#e60012;}.cls-2{fill:#fff;}.cls-3,.cls-4{fill:#004ea2;}.cls-4{fill-rule:evenodd;}</style></defs><title>자산 1</title><g id="레이어_2" data-name="레이어 2"><g id="레이어_1-2" data-name="레이어 1"><polygon class="cls-1" points="123.12 22.64 108.43 22.64 111.28 7.95 125.98 7.95 123.12 22.64 123.12 22.64"/><polygon class="cls-2" points="122.67 13.64 119.47 13.64 120.17 10.04 116.78 10.04 116.08 13.64 112.67 13.64 112.01 17.05 115.41 17.05 114.67 20.84 118.07 20.84 118.81 17.05 122 17.05 122.67 13.64 122.67 13.64"/><path class="cls-3" d="M24.28,59.78c-.16.6-.34,1.18-.53,1.76C34.07,66,47,68.7,61.07,68.7a98.25,98.25,0,0,0,32.12-5.14A125.36,125.36,0,0,1,66.35,66.7c-16,.2-30.74-2.42-42.07-6.92M1.61,36.73C1.4,19.73,30,5.6,65.58,5.15,81.52,5,96.14,7.55,107.44,12,96.24,4.65,79.62,0,61.07,0,27.34,0,0,15.38,0,34.35,0,42.6,5.17,50.17,13.79,56.09l.31-1.44c-7.77-5-12.4-11.17-12.49-17.92"/><path class="cls-3" d="M32.44,16.26H23.58l-8.71,43.3C13.94,64,10.75,70.11,5.6,70.4L6.52,73c6,0,9.88-2.08,12.47-5.67a26.63,26.63,0,0,0,4.07-9.84l9.38-41.18Z"/><path class="cls-3" d="M55.23,54.05H47.64l.7-3c-3,2-6.44,3.6-10,3.6-6.26,0-6.2-6.44-5.27-10.9l3.42-16.46L44.34,26,40.8,42.86C40.28,45.3,39.7,50,43.41,50a9.25,9.25,0,0,0,5.51-2.2l4.29-20.52L61.09,26,55.23,54.05Z"/><path class="cls-3" d="M77.83,29.13c-2.37-.06-5.39,1.44-5.39,4.17,0,3.48,10.72,4.23,10.72,11,0,7.13-7.47,10.44-13.62,10.44A22.39,22.39,0,0,1,62,53.18L61.78,50a16.35,16.35,0,0,0,7.36,1.74c2.78,0,6.55-1.57,6.55-4.81C75.75,42.23,65,42.05,65,35.79s7.13-9.56,12.69-9.56a13.84,13.84,0,0,1,6.08,1.51l.18,3.18a13.33,13.33,0,0,0-6.09-1.79"/><path class="cls-3" d="M106.81,29.24h-6.67L96.78,45.18c-.69,3.19-1,5.39,3.31,5.39a20.43,20.43,0,0,0,3.3-.29l-1.45,3.19a41.24,41.24,0,0,1-8.46,1.16c-5,0-5.62-3-4.75-7.07l3.82-18.32H89.08l.52-2.49H93l1.39-6.43L102.23,19l-1.56,7.71h6.6l-.46,2.49Z"/><path class="cls-3" d="M9.26,85.43a2.45,2.45,0,1,0,0,4.9,2.45,2.45,0,1,0,0-4.9m0-.8a3.25,3.25,0,1,1,0,6.49,3.25,3.25,0,1,1,0-6.49"/><path class="cls-3" d="M17.65,87.55c.9,0,1.11-.55,1.11-1,0-.59-.35-1-1.09-1H15.08v2Zm-3.49-2.77H18a1.56,1.56,0,0,1,1.69,1.65,1.47,1.47,0,0,1-1,1.52v0c.55.08.87.59.9,1.32.05,1.15.09,1.44.3,1.68h-1c-.15-.17-.15-.43-.19-1.18-.06-1.11-.44-1.45-1.2-1.45h-2.4V91h-.92V84.78Z"/><polygon class="cls-4" points="22.13 84.78 21.21 84.78 21.21 90.97 22.13 90.97 22.13 84.78 22.13 84.78"/><path class="cls-3" d="M27.37,87.63h2.84V91h-.66l-.16-.88a2.86,2.86,0,0,1-2.37,1A3,3,0,0,1,23.75,88,3.09,3.09,0,0,1,27,84.63c1.28,0,2.72.4,3.11,2.1h-1A1.91,1.91,0,0,0,27,85.43a2.26,2.26,0,0,0-2.37,2.47,2.21,2.21,0,0,0,2.41,2.43,2.12,2.12,0,0,0,2.31-1.9h-2v-.8Z"/><polygon class="cls-4" points="32.95 84.78 32.03 84.78 32.03 90.97 32.95 90.97 32.95 84.78 32.95 84.78"/><polygon class="cls-3" points="35.76 86.05 35.74 86.05 35.74 90.97 34.83 90.97 34.83 84.78 35.89 84.78 39.87 89.7 39.88 89.7 39.88 84.78 40.8 84.78 40.8 90.97 39.74 90.97 35.76 86.05 35.76 86.05"/><path class="cls-3" d="M45.19,85.63,44,88.37h2.34l-1.18-2.74Zm1.52,3.54h-3L42.89,91h-1l2.8-6.19h1L48.55,91h-1l-.79-1.8Z"/><polygon class="cls-3" points="49.65 84.78 50.57 84.78 50.57 90.17 54.33 90.17 54.33 90.97 49.65 90.97 49.65 84.78 49.65 84.78"/><polygon class="cls-4" points="61.77 88.11 58.73 88.11 58.73 89.01 61.77 89.01 61.77 88.11 61.77 88.11"/><path class="cls-3" d="M67.15,88.93c0,1.11,1,1.4,2,1.4s1.67-.37,1.67-1-.44-.8-1.15-.92l-1.4-.23c-.74-.12-1.84-.42-1.84-1.62s.89-1.88,2.48-1.88c1.24,0,2.54.45,2.63,1.94h-.92c-.08-.49-.35-1.14-1.83-1.14-.68,0-1.44.28-1.44,1,0,.38.25.68,1,.81l1.52.26c.48.09,1.86.32,1.86,1.59,0,1.57-1.41,2-2.66,2s-2.84-.48-2.84-2.19Z"/><polygon class="cls-4" points="73.97 84.78 73.05 84.78 73.05 90.97 73.97 90.97 73.97 84.78 73.97 84.78"/><polygon class="cls-3" points="76.78 86.05 76.76 86.05 76.76 90.97 75.85 90.97 75.85 84.78 76.91 84.78 80.89 89.7 80.91 89.7 80.91 84.78 81.82 84.78 81.82 90.97 80.76 90.97 76.78 86.05 76.78 86.05"/><path class="cls-3" d="M88.71,87a1.92,1.92,0,0,0-2.11-1.58A2.22,2.22,0,0,0,84.21,88a2.19,2.19,0,0,0,2.33,2.38,2,2,0,0,0,2.17-1.73h.92a2.93,2.93,0,0,1-3.09,2.52,3.25,3.25,0,1,1,0-6.49c1.24,0,2.94.53,3.1,2.38Z"/><polygon class="cls-3" points="91.12 84.78 96.09 84.78 96.09 85.58 92.04 85.58 92.04 87.37 95.97 87.37 95.97 88.17 92.04 88.17 92.04 90.17 96.18 90.17 96.18 90.97 91.12 90.97 91.12 84.78 91.12 84.78"/><path class="cls-3" d="M102,86.59h-1.81v-.67h.21c1.54,0,1.77-.73,1.8-1.14H103V91H102V86.59Z"/><path class="cls-3" d="M107.37,85.55a1.36,1.36,0,1,0,0,2.7,1.34,1.34,0,0,0,1.53-1.35c0-.74-.47-1.35-1.53-1.35m-1.36,4a1.12,1.12,0,0,0,1.21.83c1,0,1.72-.41,1.82-2.2h0a2.09,2.09,0,0,1-1.77.8,2.06,2.06,0,0,1-2.32-2.07,2.16,2.16,0,0,1,2.4-2.09c1.83,0,2.57,1.12,2.57,3,0,3.15-1.91,3.27-2.74,3.27a1.88,1.88,0,0,1-2-1.56Z"/><path class="cls-3" d="M113,87.42h.58c.78,0,1.18-.34,1.18-.89,0-.76-.67-1-1.32-1a1.22,1.22,0,0,0-1.39,1.26h-.86a2,2,0,0,1,2.28-2c1.55,0,2.21.8,2.21,1.65a1.19,1.19,0,0,1-.91,1.24v0A1.4,1.4,0,0,1,116,89.18c0,1-.72,1.93-2.35,1.93-.57,0-2.56,0-2.56-2h.87c0,1,.69,1.32,1.61,1.32s1.52-.46,1.52-1.14-.63-1.09-1.52-1.09c-.31,0-.43,0-.51,0v-.75Z"/><path class="cls-3" d="M119.92,85.55c-1.48,0-1.58,1.69-1.58,2.41s.1,2.42,1.58,2.42,1.59-1.7,1.59-2.42-.1-2.41-1.59-2.41m0-.73c1.91,0,2.51,1.42,2.51,3.14s-.6,3.15-2.51,3.15-2.5-1.42-2.5-3.15.6-3.14,2.5-3.14"/></g></g></svg>
            <!-- <img src="logo.svg" alt="" /> -->
          </a>
        </div>
        <div class="w-20 flex items-center justify-center">
          <button on:click={toggleMobileMenu}>
            <svg
            width="28"
            height="18"
            viewBox="0 0 28 18"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            >
            <g clip-path="url(#clip0_124_14)">
                <rect width="28" height="2" fill="#00509E" />
                <rect y="8" width="28" height="2" fill="#00509E" />
                <rect x="14" y="16" width="14" height="2" fill="#00509E" />
            </g>
            <defs>
                <clipPath id="clip0_124_14">
                <rect width="28" height="18" fill="white" />
                </clipPath>
            </defs>
            </svg>
          </button>
        </div>
      </section>
    {/if}
    {#if screenSize > 768}
    <nav class="mx-auto max-w-screen-xl flex items-center justify-center gap-4 p-8">
      <ul class="w-[40%] relative flex justify-evenly">
        <a href="/brand"
          ><li class="px-5">브랜드</li></a
        >
        <span class="text-slate-400">|</span>
        <a href="/philosophy"
          ><li class="px-5 ">제품 철학</li></a
        >
        <span class="text-slate-400">|</span>
        <a href="/store"><li class="px-5 ">스토어</li></a>
      </ul>
      <div class="w-32">
        <a href="/#">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 125.98 91.12"><defs><style>.cls-1{fill:#e60012;}.cls-2{fill:#fff;}.cls-3,.cls-4{fill:#004ea2;}.cls-4{fill-rule:evenodd;}</style></defs><title>자산 1</title><g id="레이어_2" data-name="레이어 2"><g id="레이어_1-2" data-name="레이어 1"><polygon class="cls-1" points="123.12 22.64 108.43 22.64 111.28 7.95 125.98 7.95 123.12 22.64 123.12 22.64"/><polygon class="cls-2" points="122.67 13.64 119.47 13.64 120.17 10.04 116.78 10.04 116.08 13.64 112.67 13.64 112.01 17.05 115.41 17.05 114.67 20.84 118.07 20.84 118.81 17.05 122 17.05 122.67 13.64 122.67 13.64"/><path class="cls-3" d="M24.28,59.78c-.16.6-.34,1.18-.53,1.76C34.07,66,47,68.7,61.07,68.7a98.25,98.25,0,0,0,32.12-5.14A125.36,125.36,0,0,1,66.35,66.7c-16,.2-30.74-2.42-42.07-6.92M1.61,36.73C1.4,19.73,30,5.6,65.58,5.15,81.52,5,96.14,7.55,107.44,12,96.24,4.65,79.62,0,61.07,0,27.34,0,0,15.38,0,34.35,0,42.6,5.17,50.17,13.79,56.09l.31-1.44c-7.77-5-12.4-11.17-12.49-17.92"/><path class="cls-3" d="M32.44,16.26H23.58l-8.71,43.3C13.94,64,10.75,70.11,5.6,70.4L6.52,73c6,0,9.88-2.08,12.47-5.67a26.63,26.63,0,0,0,4.07-9.84l9.38-41.18Z"/><path class="cls-3" d="M55.23,54.05H47.64l.7-3c-3,2-6.44,3.6-10,3.6-6.26,0-6.2-6.44-5.27-10.9l3.42-16.46L44.34,26,40.8,42.86C40.28,45.3,39.7,50,43.41,50a9.25,9.25,0,0,0,5.51-2.2l4.29-20.52L61.09,26,55.23,54.05Z"/><path class="cls-3" d="M77.83,29.13c-2.37-.06-5.39,1.44-5.39,4.17,0,3.48,10.72,4.23,10.72,11,0,7.13-7.47,10.44-13.62,10.44A22.39,22.39,0,0,1,62,53.18L61.78,50a16.35,16.35,0,0,0,7.36,1.74c2.78,0,6.55-1.57,6.55-4.81C75.75,42.23,65,42.05,65,35.79s7.13-9.56,12.69-9.56a13.84,13.84,0,0,1,6.08,1.51l.18,3.18a13.33,13.33,0,0,0-6.09-1.79"/><path class="cls-3" d="M106.81,29.24h-6.67L96.78,45.18c-.69,3.19-1,5.39,3.31,5.39a20.43,20.43,0,0,0,3.3-.29l-1.45,3.19a41.24,41.24,0,0,1-8.46,1.16c-5,0-5.62-3-4.75-7.07l3.82-18.32H89.08l.52-2.49H93l1.39-6.43L102.23,19l-1.56,7.71h6.6l-.46,2.49Z"/><path class="cls-3" d="M9.26,85.43a2.45,2.45,0,1,0,0,4.9,2.45,2.45,0,1,0,0-4.9m0-.8a3.25,3.25,0,1,1,0,6.49,3.25,3.25,0,1,1,0-6.49"/><path class="cls-3" d="M17.65,87.55c.9,0,1.11-.55,1.11-1,0-.59-.35-1-1.09-1H15.08v2Zm-3.49-2.77H18a1.56,1.56,0,0,1,1.69,1.65,1.47,1.47,0,0,1-1,1.52v0c.55.08.87.59.9,1.32.05,1.15.09,1.44.3,1.68h-1c-.15-.17-.15-.43-.19-1.18-.06-1.11-.44-1.45-1.2-1.45h-2.4V91h-.92V84.78Z"/><polygon class="cls-4" points="22.13 84.78 21.21 84.78 21.21 90.97 22.13 90.97 22.13 84.78 22.13 84.78"/><path class="cls-3" d="M27.37,87.63h2.84V91h-.66l-.16-.88a2.86,2.86,0,0,1-2.37,1A3,3,0,0,1,23.75,88,3.09,3.09,0,0,1,27,84.63c1.28,0,2.72.4,3.11,2.1h-1A1.91,1.91,0,0,0,27,85.43a2.26,2.26,0,0,0-2.37,2.47,2.21,2.21,0,0,0,2.41,2.43,2.12,2.12,0,0,0,2.31-1.9h-2v-.8Z"/><polygon class="cls-4" points="32.95 84.78 32.03 84.78 32.03 90.97 32.95 90.97 32.95 84.78 32.95 84.78"/><polygon class="cls-3" points="35.76 86.05 35.74 86.05 35.74 90.97 34.83 90.97 34.83 84.78 35.89 84.78 39.87 89.7 39.88 89.7 39.88 84.78 40.8 84.78 40.8 90.97 39.74 90.97 35.76 86.05 35.76 86.05"/><path class="cls-3" d="M45.19,85.63,44,88.37h2.34l-1.18-2.74Zm1.52,3.54h-3L42.89,91h-1l2.8-6.19h1L48.55,91h-1l-.79-1.8Z"/><polygon class="cls-3" points="49.65 84.78 50.57 84.78 50.57 90.17 54.33 90.17 54.33 90.97 49.65 90.97 49.65 84.78 49.65 84.78"/><polygon class="cls-4" points="61.77 88.11 58.73 88.11 58.73 89.01 61.77 89.01 61.77 88.11 61.77 88.11"/><path class="cls-3" d="M67.15,88.93c0,1.11,1,1.4,2,1.4s1.67-.37,1.67-1-.44-.8-1.15-.92l-1.4-.23c-.74-.12-1.84-.42-1.84-1.62s.89-1.88,2.48-1.88c1.24,0,2.54.45,2.63,1.94h-.92c-.08-.49-.35-1.14-1.83-1.14-.68,0-1.44.28-1.44,1,0,.38.25.68,1,.81l1.52.26c.48.09,1.86.32,1.86,1.59,0,1.57-1.41,2-2.66,2s-2.84-.48-2.84-2.19Z"/><polygon class="cls-4" points="73.97 84.78 73.05 84.78 73.05 90.97 73.97 90.97 73.97 84.78 73.97 84.78"/><polygon class="cls-3" points="76.78 86.05 76.76 86.05 76.76 90.97 75.85 90.97 75.85 84.78 76.91 84.78 80.89 89.7 80.91 89.7 80.91 84.78 81.82 84.78 81.82 90.97 80.76 90.97 76.78 86.05 76.78 86.05"/><path class="cls-3" d="M88.71,87a1.92,1.92,0,0,0-2.11-1.58A2.22,2.22,0,0,0,84.21,88a2.19,2.19,0,0,0,2.33,2.38,2,2,0,0,0,2.17-1.73h.92a2.93,2.93,0,0,1-3.09,2.52,3.25,3.25,0,1,1,0-6.49c1.24,0,2.94.53,3.1,2.38Z"/><polygon class="cls-3" points="91.12 84.78 96.09 84.78 96.09 85.58 92.04 85.58 92.04 87.37 95.97 87.37 95.97 88.17 92.04 88.17 92.04 90.17 96.18 90.17 96.18 90.97 91.12 90.97 91.12 84.78 91.12 84.78"/><path class="cls-3" d="M102,86.59h-1.81v-.67h.21c1.54,0,1.77-.73,1.8-1.14H103V91H102V86.59Z"/><path class="cls-3" d="M107.37,85.55a1.36,1.36,0,1,0,0,2.7,1.34,1.34,0,0,0,1.53-1.35c0-.74-.47-1.35-1.53-1.35m-1.36,4a1.12,1.12,0,0,0,1.21.83c1,0,1.72-.41,1.82-2.2h0a2.09,2.09,0,0,1-1.77.8,2.06,2.06,0,0,1-2.32-2.07,2.16,2.16,0,0,1,2.4-2.09c1.83,0,2.57,1.12,2.57,3,0,3.15-1.91,3.27-2.74,3.27a1.88,1.88,0,0,1-2-1.56Z"/><path class="cls-3" d="M113,87.42h.58c.78,0,1.18-.34,1.18-.89,0-.76-.67-1-1.32-1a1.22,1.22,0,0,0-1.39,1.26h-.86a2,2,0,0,1,2.28-2c1.55,0,2.21.8,2.21,1.65a1.19,1.19,0,0,1-.91,1.24v0A1.4,1.4,0,0,1,116,89.18c0,1-.72,1.93-2.35,1.93-.57,0-2.56,0-2.56-2h.87c0,1,.69,1.32,1.61,1.32s1.52-.46,1.52-1.14-.63-1.09-1.52-1.09c-.31,0-.43,0-.51,0v-.75Z"/><path class="cls-3" d="M119.92,85.55c-1.48,0-1.58,1.69-1.58,2.41s.1,2.42,1.58,2.42,1.59-1.7,1.59-2.42-.1-2.41-1.59-2.41m0-.73c1.91,0,2.51,1.42,2.51,3.14s-.6,3.15-2.51,3.15-2.5-1.42-2.5-3.15.6-3.14,2.5-3.14"/></g></g></svg>
        </a>
      </div>
      <ul class="w-[40%] relative flex justify-evenly">
        <a href="/jobs"><li class="px-5">직업</li></a
        >
        <span class="text-slate-400">|</span>
        <a href="https://www.justkorea.co.kr/"
          ><li class="px-5">제품 찾기</li></a
        >
        <span class="text-slate-400">|</span>
        <a href="/herb"><li class="">허브 백과사전</li></a>
      </ul>
    </nav>
    {/if}
  </header>
  {#if mobileMenuView}
    <div
      transition:slide={{ axis: "y", duration: 300 }}
      class="text-white w-full h-screen fixed top-0 bg-navy"
    >
      <div class="flex items-center justify-between mt-10 mx-10">
        <h1 class="text-xl"><span class="text-gold">JUST</span> KOREA</h1>
        <button on:click={toggleMobileMenu}>
          <svg
          width="25"
          height="25"
          viewBox="0 0 25 25"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
      >
          <path
          d="M2.5 22.5L22.5 2.5M2.5 2.5L22.5 22.5L2.5 2.5Z"
          stroke="#D2AC53"
          stroke-width="2"
          />
      </svg>
        </button>
      </div>
      <ul class="mt-20 mx-10 flex flex-col gap-2">
        {#each mobileMenuList as li}
          <a class="block py-2" href={li.URL}>
            <li class="flex text-white text-lg font-light">
              {li.name}
            </li>
          </a>
        {/each}
      </ul>
    </div>
  {/if}
</main>

<style>
  @import url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css");

  main {
    z-index: 1000;
    font-family: "Pretendard";
    position: absolute;
    top: 0px;
    width: 100%;
    background-color: white;
  }

  nav ul a li {
    position: relative;
    transition: all 0.4s;
  }

  nav ul a li:hover::before {
    content: "";
    bottom: -30px;
    left: 5px;
    position: absolute;
    width: 100%;
    height: 3px;
    background-color: #2553a0;
  }

  nav ul a li::before {
    transition: all 0.2s;
    content: "";
    bottom: -35px;
    left: 5px;
    position: absolute;
    width: 100%;
    height: 3px;
    background-color: #ffffff;
  }


</style>
